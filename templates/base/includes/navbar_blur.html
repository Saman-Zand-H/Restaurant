{% load static %}

{% block stylesheet %}
<style>
    .input-container input {
        flex: 1;
        outline: none;
        border: 1px solid rgba(0, 0, 0, 0.2);
        font-size: 14px;
        border-radius: 50px;
        padding: .55rem 1.2rem;
        width: 18rem;
    }
</style>
{% endblock %}

<div class="container position-sticky z-index-sticky top-0">
    <div class="row">
        <div class="col-12">
            <nav class="navbar navbar-expand-lg  
                    blur border-radius-xl 
                    top-0 z-index-fixed 
                    shadow position-absolute 
                    my-3 
                    py-2 
                    start-0 
                    end-0 mx-4">
                <div class="container-fluid px-0 align-items-lg-center my-lg-n3">
                    <a class="navbar-brand font-weight-bolder ms-sm-3"
                        href="{% url 'restaurants:home' %}" rel="tooltip"
                        data-placement="bottom">
                        Rubik Food
                    </a>
                    <button class="navbar-toggler shadow-none ms-2" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navigation" aria-controls="navigation" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon mt-2">
                            <span class="navbar-toggler-bar bar1"></span>
                            <span class="navbar-toggler-bar bar2"></span>
                            <span class="navbar-toggler-bar bar3"></span>
                        </span>
                    </button>
                    <div class="collapse navbar-collapse d-lg-flex pt-3 pb-2 py-lg-0 w-100" id="navigation">
                        <ul class="navbar-nav navbar-nav-hover ms-auto align-items-lg-center">
                            <li class="nav-item dropdown dropdown-hover mx-2">
                                <a class="nav-link ps-2 d-flex cursor-pointer align-items-center" id="dropdownMenuPatrnership"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="fa fa-handshake">&nbsp; </i>
                                    Patrnership
                                    <img src="{% static 'assets/img/down-arrow-dark.svg' %}" alt="down-arrow"
                                        class="arrow ms-auto ms-md-2">
                                </a>
                                <ul 
                                    class="dropdown-menu dropdown-menu-end 
                                           dropdown-menu-animation dropdown-md 
                                           dropdown-md-responsive mt-0 
                                           mt-lg-3 p-3 border-radius-lg"
                                    aria-labelledby="dropdownMenuPatrnership">
                                   
                                    <div class="d-none d-lg-block">
                                        <ul class="list-group">
                                            <li class="nav-item list-group-item border-0 p-0">
                                                <a class="dropdown-item py-2 ps-3 border-radius-md"
                                                    href=" https://www.creative-tim.com/learning-lab/bootstrap/overview/material-kit ">
                                                    <h6
                                                        class="dropdown-header text-dark 
                                                               font-weight-bolder d-flex 
                                                               justify-content-cente align-items-center p-0"
                                                       >
                                                        For Restaurants</h6>
                                                    <span class="text-sm">Become a restaurant partner with Rubik.</span>
                                                </a>
                                            </li>
                                            <li class="nav-item list-group-item border-0 p-0">
                                                <a class="dropdown-item py-2 ps-3 border-radius-md"
                                                    href=" https://www.creative-tim.com/learning-lab/bootstrap/colors/material-kit ">
                                                    <h6
                                                        class="dropdown-header text-dark font-weight-bolder d-flex justify-content-cente align-items-center p-0">
                                                        For Derivers</h6>
                                                    <span class="text-sm">Become a driver partner with Rubik.</span>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </ul>
                            </li>

                            <li class="nav-item dropdown dropdown-hover mx-2">
                                <a class="nav-link ps-2 d-flex cursor-pointer align-items-center" id="dropdownMenuDocs" data-bs-toggle="dropdown"
                                    aria-expanded="false">
                                    <i class=" fa fa-user"></i>&nbsp;
                                    Authentication
                                    <img 
                                         src="{% static 'assets/img/down-arrow-dark.svg' %}" 
                                         alt="down-arrow" 
                                         class="arrow ms-auto ms-md-2"
                                        >
                                </a>
                                <ul 
                                    class="dropdown-menu dropdown-menu-end
                                           dropdown-menu-animation dropdown-md 
                                           dropdown-md-responsive mt-0 
                                           mt-lg-3 p-3 border-radius-lg"
                                    aria-labelledby="dropdownMenuAuth"
                                   >
                                    <div class="d-none d-lg-block">
                                        <ul class="list-group">
                                            {% if user.is_authenticated %}
                                                <li class="nav-item list-group-item border-0 p-0">
                                                    <a class="dropdown-item py-2 ps-3 border-radius-md"
                                                        href="{% url 'account_logout' %}">
                                                        <h6
                                                            class="dropdown-header text-dark 
                                                                   font-weight-bolder d-flex 
                                                                   justify-content-cente align-items-center p-0"
                                                           >
                                                            Logout
                                                        </h6>
                                                        <span class="text-sm">Log out of your account.</span>
                                                    </a>
                                                </li>
                                                <li class="nav-item list-group-item border-0 p-0">
                                                    <a class="dropdown-item py-2 ps-3 border-radius-md"
                                                        href="{{ user.get_dashboard_url }}">
                                                        <h6
                                                            class="dropdown-header text-dark 
                                                                   font-weight-bolder d-flex 
                                                                   justify-content-cente align-items-center p-0"
                                                           >
                                                            Dashboard
                                                        </h6>
                                                        <span class="text-sm">Take a look at your dashboard.</span>
                                                    </a>
                                                </li>
                                            {% else %}
                                                <li class="nav-item list-group-item border-0 p-0">
                                                    <a class="dropdown-item py-2 ps-3 border-radius-md"
                                                        href="{% url 'account_login' %}">
                                                        <h6
                                                            class="dropdown-header text-dark 
                                                                   font-weight-bolder d-flex 
                                                                   justify-content-cente align-items-center p-0"
                                                           >
                                                            Login
                                                        </h6>
                                                        <span class="text-sm">Log in to your account.</span>
                                                    </a>
                                                </li>
                                                <li class="nav-item list-group-item border-0 p-0">
                                                    <a class="dropdown-item py-2 ps-3 border-radius-md"
                                                        href="{% url 'account_signup' %}">
                                                        <h6
                                                            class="dropdown-header text-dark 
                                                                   font-weight-bolder d-flex 
                                                                   justify-content-cente align-items-center p-0"
                                                           >
                                                            Signup
                                                        </h6>
                                                        <span class="text-sm">Sign up to your or use a social account.</span>
                                                    </a>
                                                </li>
                                           {% endif %}
                                        </ul>
                                    </div>
                                </ul>
                            </li>

                            <li class="nav-item mt-lg-3">
                                <div 
                                     class="autocomplete-container form-control" 
                                     id="searchLocationNav"
                                    >
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </div>
</div>

<script src="{% static 'assets/js/autocomplete.js' %}" type="text/javascript"></script>
<script>
    const searchLocationUrl = "";
    addressAutocomplete(document.getElementById("searchLocationNav"),
        (data) => {
            window.location.href = `${window.location.origin}/restaurants/?lat=${data.lat}&lon=${data.lon}`;
        }, {
        placeholder: "Enter a city, address, or postcode"
    }
    );
</script>